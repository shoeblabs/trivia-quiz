!function(){"use strict";angular.module("triviaQuiz",["ngAnimate","ngSanitize","ui.router","ui.router.state.events"])}(),function(){"use strict";function t(t,e){"ngInject";t.html5Mode(!0),e.debugInfoEnabled(!1)}angular.module("triviaQuiz").constant("API_URL","https://opentdb.com/").config(t),t.$inject=["$locationProvider","$compileProvider"]}(),function(){"use strict";function t(t,e){"ngInject";e.otherwise("/"),t.state("home",{url:"/",templateUrl:"app/views/home.html?ver=1.0.0",controller:"homeCtrl",controllerAs:"ctrl"}).state("quiz",{url:"/quiz",templateUrl:"app/views/quiz.html?ver=1.0.0",controller:"quizCtrl",controllerAs:"ctrl"})}angular.module("triviaQuiz").config(t),t.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function t(t,e){"ngInject";function r(t){a.quizDetail.category=t,a.step=2,a.changeStep(a.step)}function i(t){a.quizDetail.difficulty=t,a.step=3,a.changeStep(a.step)}function o(r){a.quizDetail.user=r,e.setDetails(a.quizDetail),t.go("quiz")}function n(t){switch(t){case 1:a.pageTitle="Select Categories";break;case 2:a.pageTitle="Select Level";break;case 3:a.pageTitle="Enter Personal Details"}}var a=this;a.isLoading=!0,a.categories=[],a.quizDetail={},a.step=1,a.user={},a.pageTitle="Select Category",a.cardColors=["#009688","#ef4438","#4caf50","#38a4dd","#ffc107","#8e76b6","#ec407a"],a.game=e.getScore()||{},a.setCategory=r,a.setLevel=i,a.setUserInfo=o,a.changeStep=n,e.getCategoryList().then(function(t){200==t.status&&(angular.forEach(t.data.trivia_categories,function(t){t.name=-1!=t.name.search(":")?t.name.split(":")[1].trim():t.name}),a.categories=t.data.trivia_categories)}).catch(function(t){console.log("get category error",t)}).finally(function(){a.isLoading=!1})}angular.module("triviaQuiz").controller("homeCtrl",t),t.$inject=["$state","quiz"]}(),function(){"use strict";function t(t,e,r){"ngInject";function i(){e.cancel(n.timer),a=null,n.questions.length===n.currentQuestion+1?(n.hideQuizBlock=!0,n.quizDetail.score=0,n.quizDetail.totalScore=n.questions.length,angular.forEach(n.answers,function(t,e){t===n.questions[e].correct_answer&&(n.quizDetail.score+=1)}),n.showQuizResult=!0,r.setScore(n.quizDetail.totalScore,n.quizDetail.score)):(n.currentQuestion++,n.initTimer())}function o(){n.timeCount=60,a||(n.timer=e(function(){0==--n.timeCount&&n.next()},1e3))}var n=this,a=null;n.quizDetail={},n.timeCount=60,n.hideQuizBlock=!0,n.showQuizResult=!1,n.currentQuestion=0,n.questions=[],n.answers=[],n.initTimer=o,n.next=i,r.getDetails().then(function(t){return n.quizDetail=t,t}).then(function(e){r.getQuestionList(e.category.id,e.difficulty,20).then(function(e){e.data.results.length?(angular.forEach(e.data.results,function(t){t.answers=angular.copy(t.incorrect_answers),t.answers.push(t.correct_answer),t.answers=r.shuffleArray(t.answers)}),n.questions=e.data.results,n.hideQuizBlock=!1,o()):(alert("Sorry, No data :( ....... Please Try different category or level"),t.go("home"))})}).catch(function(e){console.log(e),t.go("home")})}angular.module("triviaQuiz").controller("quizCtrl",t),t.$inject=["$state","$interval","quiz"]}(),function(){"use strict";function t(t,e,r,i){"ngInject";function o(){return t.get(i+"api_category.php")}function n(e,r,o){return o=o||20,e=e||1,r=r||"medium",t.get(i+"api.php?amount="+o+"&category="+e+"&difficulty="+r)}function a(t){m=t}function c(){var t=e.defer();return m.hasOwnProperty("user")?t.resolve(m):t.reject("no quiz data"),t.promise}function u(t){for(var e=t.length-1;e>0;e--){var r=Math.floor(Math.random()*(e+1)),i=t[e];t[e]=t[r],t[r]=i}return t}function s(t,e){localStorage.setItem("totalScore",0),localStorage.setItem("score",0)}function l(t,e){localStorage.setItem("totalScore",parseInt(localStorage.getItem("totalScore")||0)+t),localStorage.setItem("score",parseInt(localStorage.getItem("score")||0)+e)}function g(){return{score:parseInt(localStorage.getItem("score")),totalScore:parseInt(localStorage.getItem("totalScore"))}}var f={},m={};return f.getCategoryList=o,f.getQuestionList=n,f.setDetails=a,f.getDetails=c,f.shuffleArray=u,f.getScore=g,f.setScore=l,f.resetScore=s,f}angular.module("triviaQuiz").factory("quiz",t),t.$inject=["$http","$q","$timeout","API_URL"]}();